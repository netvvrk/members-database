<div class="flex pb-6 items-center justify-between">
  <div class="">
    <h1 class="text-xl">Artworks</h1>
    <%= paginate @artworks %>
  </div>
  <div class="flex-1 flex justify-end gap-3 items-center ">
    <%= form_with method: :get do |f| %>
      <%= f.text_field :search, value: @search_term, placeholder: "search", label: '&nbsp;'.html_safe, class: "w-40 rounded focus:w-56 transition-[width] duration-300"   %>
      <%= f.submit class: "hidden" %>
    <% end %>
    <% if @search_term.present? %>
      <%= link_to curator_artworks_path do %>
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" class="fill-slate-600" viewBox="0 0 16 16">
          <path d="M2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2zm3.354 4.646L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 1 1 .708-.708"/>
        </svg>
      <% end %>
    <% end %>    
    <label class="z-20 w-10 relative flex items-center ml-4 cursor-pointer px-2 py-6" for="filter-menu">
      <!-- mobile menu hidden input. works for keeping the state -->
      <input class="peer/filter hidden" type="checkbox" id="filter-menu" />
      <!-- mobile menu icon. -->
      <a alt="more filters" class="tw-btn-primary text-xs absolute text-nowrap right-0 z-30 opacity-0 transition-opacity peer-checked/filter:opacity-100">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-x" viewBox="0 0 16 16">
          <title>more filters</title>
          <path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708"/>
        </svg>
      </a>   
      <a alt="close filters" class="tw-btn-primary text-xs absolute text-nowrap right-0 z-30 opacity-100 transition-opacity peer-checked/filter:opacity-0">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-filter" viewBox="0 0 16 16">
          <title>close filters</title>
          <path d="M6 10.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 0 1h-3a.5.5 0 0 1-.5-.5m-2-3a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5m-2-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5"/>
        </svg>
      </a>
      <div class=" top-16 p-6 right-0 bg-white border-l-slate-200 border-1  fixed  z-20 h-full w-full translate-x-full overflow-y-auto overscroll-y-none transition duration-500 peer-checked/filter:translate-x-1 peer-checked/filter:sm:translate-x-1/3 peer-checked/filter:md:translate-x-1/2">
            <%= form_with method: :get do |f| %>
              <div class="flex flex-col gap-4">
              <%= f.text_field :search, value: @search_term, placeholder: "search", label: 'Search term', class: "w-40 rounded" %>
              <%= f.text_field :min_price, value: @min_price, placeholder: "min price", label: 'Min price', class: "w-20 rounded" %>
              <%= f.text_field :max_price, value: @max_price, placeholder: "max price", label: 'Max price', class: "w-20 rounded" %>
              <%= f.submit "Filter", class: "tw-btn-secondary"  %>
              </div>
            <% end %>
      </div>
    </label>
  </div>
</div>

<% 
  items_per_column = (@artworks.length / 4.0).ceil # TODO: calculate reminder for more even columns
%>
<div class="flex justify-center">
  <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 ">
      <% @artworks.each_with_index do |artwork, index| %>
        <% if index % items_per_column == 0 %>
          <div class="grid gap-4 content-baseline">
        <% end %>
            <%= render artwork %>
        <% if index % items_per_column == items_per_column - 1 %>
          </div>
        <% end %>

      <% end %>

  </div>
</div>




</div>